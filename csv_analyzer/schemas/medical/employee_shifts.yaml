name: employee_shifts
vertical: medical
version: "1.2"
description: "Employee work schedules, shift assignments, staff rosters, nursing schedules, staffing assignments"

# =============================================================================
# PREPROCESSING CONFIGURATION
# Applied before classification and column mapping
# =============================================================================
preprocessing:
  # Structure detection hints for multi-row headers
  structure_hints:
    max_header_rows: 3
    metadata_row_patterns:
      - "^\\d{2}\\.\\d{2}\\.\\d{4}\\s*-"  # Date range pattern (01.12.2025 - 31.12.2025)
    
  # Row filtering via SQL conditions
  row_filters:
    - name: exclude_empty_dates
      description: "Remove rows with no date value"
      condition: "תאריך IS NOT NULL AND TRIM(תאריך) != ''"
      enabled: true
      
  # Column value transformations
  column_transforms:
    # Clean asterisk prefix from time columns (e.g., "* 14:30" → "14:30")
    - source_column: "כניסה"
      transform_type: clean_prefix
      pattern: "^\\*\\s*"
      replacement: ""
      
    - source_column: "יציאה"
      transform_type: clean_prefix
      pattern: "^\\*\\s*"
      replacement: ""
      
    # Normalize Hebrew date format (e.g., "ב - 01" → ISO date)
    - source_column: "תאריך"
      transform_type: hebrew_date_normalize
      pattern: "^([אבגדהוש])\\s*-\\s*(\\d{1,2})$"
      context_date_column: null  # Uses session date range from metadata

# =============================================================================
# FIELD DEFINITIONS
# =============================================================================
fields:
  - name: shift_id
    type: string
    required: false
    description: "Unique identifier for this shift record or schedule entry"
    aliases:
      - schedule_id
      - roster_id
      - record_id
      - shift_num
      # Hebrew
      - מזהה_משמרת
      # Spanish
      - turno_id
      # Arabic
      - معرف_الوردية
      # Russian
      - id_смены
      # French
      - id_poste
    embedding_text: "shift record schedule unique identifier ID number"

  - name: employee_id
    type: string
    required: false
    description: "Unique identifier for the employee, staff member, or healthcare worker"
    aliases:
      # English variations
      - emp_id
      - staff_id
      - worker_id
      - emp_num
      - employee_number
      - staff_code
      - worker_code
      - nrs_id
      - nurse_id
      - personnel_id
      - personnel_no
      - badge
      - emp_code
      # Hebrew (עברית)
      - מספר_עובד
      - קוד_עובד
      - מזהה_עובד
      - זיהוי_עובד
      - ת_עובד
      - מס_עובד
      - קוד
      # Spanish (Español)
      - numero_empleado
      - id_empleado
      - codigo_trabajador
      - trabajador
      # Arabic (العربية)
      - رقم_الموظف
      - معرف_العامل
      - موظف
      # Russian (Русский)
      - номер_сотрудника
      - id_работника
      - сотрудник
      # French (Français)
      - numero_employe
      - id_employe
      - employé
    embedding_text: "employee worker staff nurse identifier ID number code unique personnel"

  - name: shift_date
    type: date
    required: false
    description: "The calendar date when the shift occurs"
    # Format transformation support
    target_format: "YYYY-MM-DD"
    accepts_formats:
      - "YYYY-MM-DD"
      - "DD/MM/YYYY"
      - "MM/DD/YYYY"
      - "DD-MM-YYYY"
    aliases:
      - work_date
      - schedule_date
      - date
      - shift_dt
      - dt
      - work_dt
      - working_date
      - duty_date
      - work_day
      # Hebrew
      - תאריך_משמרת
      - תאריך_עבודה
      - תאריך
      - יום_עבודה
      - יום בחודש
      - יום_בחודש
      # Spanish
      - fecha_turno
      - fecha_trabajo
      - fecha
      # Arabic
      - تاريخ_الوردية
      - تاريخ
      # Russian
      - дата_смены
      - дата
      # French
      - date_travail
      # Portuguese
      - data
    embedding_text: "shift work schedule date day calendar when working"

  - name: shift_start
    type: datetime
    required: false
    description: "The scheduled/planned time when the shift begins (optional for roster-style schedules)"
    embedding_text: "shift start scheduled planned begin time entry arrival clock in"
    aliases:
      - scheduled_start
      - start_time
      - clock_in
      - time_in
      - begin
      - start
      - in_time
      - t_in
      - entry_time
      - arrival
      # Hebrew
      - שעת_התחלה
      - שעת_כניסה
      - התחלה
      - כניסה
      - זמן_התחלה
      - שעת_הגעה
      # Spanish
      - hora_entrada
      - inicio_turno
      - entrada
      # Arabic
      - وقت_البداية
      - بداية
      # Russian
      - время_начала
      - начало
      # French
      - heure_debut
      # Portuguese
      - início

  - name: shift_end
    type: datetime
    required: false
    description: "The scheduled/planned time when the shift ends (optional for roster-style schedules)"
    embedding_text: "shift end scheduled planned finish time departure exit clock out"
    aliases:
      - scheduled_end
      - end_time
      - clock_out
      - time_out
      - finish
      - end
      - out_time
      - t_out
      - exit_time
      - departure
      # Hebrew
      - שעת_סיום
      - שעת_יציאה
      - סיום
      - יציאה
      - זמן_סיום
      - שעת_עזיבה
      # Spanish
      - hora_salida
      - fin_turno
      - salida
      # Arabic
      - وقت_النهاية
      - نهاية
      # Russian
      - время_окончания
      - окончание
      # French
      - heure_fin
      # Portuguese
      - fim

  - name: duration_minutes
    type: integer
    required: false
    description: "Total duration of the shift in minutes or hours worked"
    # Unit transformation support
    target_unit: minutes
    accepts_units:
      - minutes
      - hours
      - seconds
    aliases:
      - duration
      - hours_worked
      - hrs
      - work_hours
      - shift_length
      - dur_hrs
      - hours
      - total_hours
      - worked_hrs
      - total_hrs
      - duration_min
      # Hebrew
      - משך_משמרת
      - שעות_עבודה
      - משך
      - שעות
      # Spanish
      - horas_trabajadas
      - duracion
      - horas
      # Arabic
      - ساعات_العمل
      - ساعات
      # Russian
      - часы_работы
      - часы
      # French
      - heures_travaillees
      - heures
    embedding_text: "duration worked length time total shift period"

  # ============================================
  # ACTUAL (RECORDED) TIMES
  # For systems that track actual clock in/out times
  # ============================================

  - name: actual_start
    type: datetime
    required: false
    description: "Actual time when the employee clocked in / arrived"
    aliases:
      - actual_start
      - real_start
      - clock_in_time
      - actual_in
      - real_in
      - recorded_start
      # Hebrew
      - שעת_התחלה_בפועל
      - כניסה_בפועל
      # Spanish
      - inicio_real
      - hora_entrada_real
      # Arabic
      - وقت_البداية_الفعلي
      # Russian
      - фактическое_начало
      # French
      - debut_reel
    embedding_text: "actual real recorded clock in start time arrived punched"

  - name: actual_end
    type: datetime
    required: false
    description: "Actual time when the employee clocked out / departed"
    aliases:
      - actual_end
      - real_end
      - clock_out_time
      - actual_out
      - real_out
      - recorded_end
      # Hebrew
      - שעת_סיום_בפועל
      - יציאה_בפועל
      # Spanish
      - fin_real
      - hora_salida_real
      # Arabic
      - وقت_النهاية_الفعلي
      # Russian
      - фактическое_окончание
      # French
      - fin_reel
    embedding_text: "actual real recorded clock out end time departed punched"

  - name: actual_hours
    type: float
    required: false
    description: "Actual hours worked, stored as minutes for consistency"
    target_unit: minutes
    accepts_units:
      - minutes
      - hours
    aliases:
      - actual_hrs
      - real_hours
      - worked_hours
      - recorded_hours
      - real_duration
      # Hebrew
      - שעות_בפועל
      - משך_בפועל
      # Spanish
      - horas_reales
      - horas_trabajadas_reales
      # Arabic
      - ساعات_فعلية
      # Russian
      - фактические_часы
      # French
      - heures_reelles
    embedding_text: "actual real recorded hours worked duration shift length"

  - name: department_code
    type: string
    required: false
    description: "Department, unit, or ward where the shift takes place"
    aliases:
      - department
      - dept
      - dept_code
      - unit
      - unit_code
      - ward
      - wing
      - location
      - dept_cd
      - section
      - area
      # Hebrew
      - מחלקה
      - יחידה
      - שם_מחלקה
      - קוד_מחלקה
      - אגף
      - מחלקת_עבודה
      - חטיבה
      # Spanish
      - departamento
      - unidad
      # Arabic
      - القسم
      - الوحدة
      - قسم
      # Russian
      - отделение
      - подразделение
      - отдел
      # French
      - departement
      - service
    embedding_text: "department unit ward section division חטיבה מחלקה יחידה אגף location area hospital clinic"

  - name: shift_type
    type: string
    required: false
    description: "Type of shift - morning, evening, night, day, overnight - the time period of the shift"
    aliases:
      - type
      - shift_kind
      - shift_category
      - category
      - shift_class
      # Hebrew
      - סוג_משמרת
      - סוג
      - סוג_תורנות
      - תורנות
      - סיווג_משמרת
      - ק.משמרת
      - קוד_משמרת
      - קוד משמרת
      # Spanish
      - tipo_turno
      - turno
      # Arabic
      - نوع_الوردية
      - نوع
      # Russian
      - тип_смены
      - тип
      # French
      - type_poste
    embedding_text: "shift type time period morning בוקר evening ערב night לילה day overnight when schedule code קוד משמרת"

  - name: employee_name
    type: string
    required: false
    description: "Full name of the employee or staff member"
    aliases:
      - name
      - full_name
      - staff_name
      - worker_name
      - staff_member
      # Hebrew
      - עובד
      - שם_עובד
      - שם
      - שם_מלא
      # Spanish
      - nombre_empleado
      - nombre
      # Arabic
      - اسم_الموظف
      - اسم
      # Russian
      - имя_сотрудника
      - имя
      # French
      - nom_employe
      - nom
    embedding_text: "employee name full name staff worker person nurse doctor עובד שם"

  - name: is_supervisor
    type: boolean
    required: false
    description: "Whether the employee is a supervisor or team lead for this shift"
    aliases:
      - supervisor
      - is_lead
      - team_lead
      - lead
      - manager
      - is_manager
      # Hebrew
      - אחראי
      - מנהל
      - האם_אחמש
      - אחמש
      # Spanish
      - es_supervisor
      - supervisor
      # Arabic
      - مشرف
      # Russian
      - руководитель
      # French
      - superviseur
    embedding_text: "supervisor lead manager team responsible"

  - name: break_minutes
    type: integer
    required: false
    description: "Break time during the shift in minutes"
    # Unit transformation support
    target_unit: minutes
    accepts_units:
      - minutes
      - hours
    aliases:
      - break
      - break_time
      - break_duration
      - break_min
      - break_hrs
      - rest_time
      # Hebrew
      - הפסקה
      - זמן_הפסקה
      # Spanish
      - descanso
      - tiempo_descanso
      # Arabic
      - استراحة
      # Russian
      - перерыв
      # French
      - pause
    embedding_text: "break rest pause time off"

  # ============================================
  # ROLE AND LOCATION FIELDS
  # For staffing roster/assignment schedules
  # ============================================

  - name: role
    type: string
    required: false
    description: "The role or position assigned for this shift - what job the person does (e.g., gastro nurse, recovery nurse, doctor, assistant)"
    aliases:
      # English variations
      - position
      - job_role
      - job_title
      - assignment_role
      - staff_role
      - function
      - duty
      - task
      - shift_role
      - assigned_role
      - shift_name
      - assignment
      # Hebrew (עברית)
      - שם משמרת
      - שם_משמרת
      - תפקיד
      - תפקיד_משמרת
      - סוג_תפקיד
      - תפקיד_עובד
      - משימה
      - סוג עובד
      # Spanish (Español)
      - rol
      - puesto
      - cargo
      - funcion
      # Arabic (العربية)
      - الدور
      - المنصب
      - الوظيفة
      # Russian (Русский)
      - роль
      - должность
      - позиция
      # French (Français)
      - role
      - poste
      - fonction
    embedding_text: "role position job title what person does אח גסטרו אח התאוששות רופא כע עזר nurse doctor assistant recovery gastro שם משמרת תפקיד"

  - name: site
    type: string
    required: false
    description: "The physical site, location, or facility where the shift takes place"
    aliases:
      # English variations
      - facility
      - location_name
      - branch
      - clinic_name
      - hospital_name
      - center
      - campus
      - building
      # Hebrew (עברית)
      - אתר
      - מיקום
      - סניף
      - מרכז
      - בניין
      - מתחם
      - מקום
      # Spanish (Español)
      - sitio
      - ubicacion
      - centro
      - sucursal
      # Arabic (العربية)
      - الموقع
      - المركز
      - الفرع
      # Russian (Русский)
      - объект
      - место
      - филиал
      # French (Français)
      - site
      - lieu
      - centre
    embedding_text: "site location facility branch clinic hospital center campus building"

